<!doctype html>
<html lang="en">



<head>
    <title>IOT21</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- PgP 7/11/2019 summative assignment for Raspberry Pi, Arduino Uno, micro:bit -->
    <!-- Bootstrap -->
    <link href="../../ReadOnly/bootstrap.css" rel="stylesheet">


</head>

<body>

    <form class="container-fluid" action="https://eprofessor.azurewebsites.net/code/ProcessFormData.asp" method="post" name="frmAssignment" id="frmAssignment">

        <input name="InstID" id="InstID" value="00617282" type="hidden">
        <!-- had to put assignment here, because it is used in the path calculation -->
        <!-- <input  name="assignment" id="assignment" value="Formative00" type="hidden" > -->

        <hr />
        <h1 class="text-center">Raspberry Pi Sensor Data to MySQL/mariadB<br />
            ODBC Link to Microsoft Access</h1>
<h2 id="student-info" class="sr-only">Student Information</h2>
<div class="row" aria-labelledby="student-info">
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="FirstName" class="text-dark">First Name:</label>
            <input class="form-control"
                   name="FirstName"
                   id="FirstName"
                   type="text"
                   readonly
                   aria-readonly="true"
                   autocomplete="given-name"
                   aria-label="First Name"
                   tabindex="0" />
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="LastName" class="text-dark">Last Name:</label>
            <input class="form-control"
                   name="LastName"
                   id="LastName"
                   type="text"
                   readonly
                   aria-readonly="true"
                   autocomplete="family-name"
                   aria-label="Last Name"
                   tabindex="0" />
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="StarID" class="text-dark">StarID:</label>
            <input class="form-control"
                   name="StarID"
                   id="StarID"
                   type="text"
                   readonly
                   aria-readonly="true"
                   autocomplete="username"
                   aria-label="StarID"
                   tabindex="0" />
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="email" class="text-dark">Email:</label>
            <input class="form-control"
                   name="email"
                   id="email"
                   type="email"
                   readonly
                   aria-readonly="true"
                   autocomplete="email"
                   aria-label="Email"
                   tabindex="0" />
        </div>
    </div>
</div>
<input name="pin" id="pin" type="hidden" aria-hidden="true" />

<h2 id="course-info" class="sr-only">Course Information</h2>
<div class="row" aria-labelledby="course-info">
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="Semester" class="text-dark">Semester:</label>
            <input class="form-control"
                   name="Semester"
                   id="Semester"
                   type="text"
                   readonly
                   aria-readonly="true"
                   aria-label="Semester"
                   tabindex="0" />
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="Class" class="text-dark">Class:</label>
            <input class="form-control"
                   name="Class"
                   id="Class"
                   type="text"
                   readonly
                   aria-readonly="true"
                   aria-label="Class"
                   tabindex="0" />
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="Section" class="text-dark">Section:</label>
            <input class="form-control"
                   name="Section"
                   id="Section"
                   type="text"
                   readonly
                   aria-readonly="true"
                   aria-label="Section"
                   tabindex="0" />
        </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-3">
        <div class="form-group">
            <label for="assignment" class="text-dark">Assignment:</label>
            <input class="form-control"
                   name="assignment"
                   id="assignment"
                   type="text"
                   readonly
                   value="IOT21"
                   aria-readonly="true"
                   aria-label="Assignment"
                   tabindex="0" />
        </div>
    </div>
</div>


        <div class="col-lg-12">
            <br />
            <input class=" text-danger btn-block btn-lg" type="submit" name="Submit" value="SUBMIT -once you have completed this assignment- SUBMIT" /><br />
        </div>

        <div class="h3 text-danger col-lg-12">
            100 Points<hr />
        </div>


        <div class="col-lg-12"><a href="#Objectives" class="btn btn-info" data-toggle="collapse">Learning Objectives</a></div>
        <div id="Objectives" class=" collapse in col-lg-12">


            <p>
                These exercises will guide you through the process of gathering Raspberry Pi sensor data in a MySQL/Maria database server on the Raspberry Pi.<br />
                Then you will use Microsoft Access to link over a network connection to the MySQL/Maria database to view this data.<br />
                <br />

                More information on setting up <a href="https://pimylifeup.com/raspberry-pi-mysql/" class="bg-info text-white" target="_blank">MySQL</a> is available online.<br />

            </p>
            <p>After completing this assignment you will be able to:</p>
            <ol>
                <li>Write Python code to collect Raspberry Pi sensor data</li>
                <li>Write Python code to insert sensor data into MySQL database</li>
                <li>Use Microsoft Access on a network to view stored sensor data on a MySQL database on a Raspberry Pi </li>
            </ol>
            <hr />
        </div>



        <div class="col-lg-12"><a href="#Overview" class="btn btn-info" data-toggle="collapse">Assignment Overview</a></div>
			<h3>When you encounter technical issues, please first review <a href="../IOT00/IOT00.html"  class="bg-info text-white" target="_blank" >IOT00</a>.    </h3>

        <div id="Overview" class="collapse in  col-lg-12">

            <h3>Prerequisites
            </h3>

            Before doing this assignment review <a href="../IOT10/IOT10.html"  class="bg-info text-white" target="_blank" >IOT10</a>- MySQL on Raspberry Pi, and <a href="../IOT20/IOT20.html" class="bg-info text-white" target="_blank"  >IOT20</a>-Linking Microsoft Access to MySQL using ODBC. 
            <br />

            You must be using a Raspberry Pi that has the following installed and configured:<br />

            <ol>
                <li>Maria/MySQL database (using mariadb, so install required mariadb connector</li>
                <li>phpMyAdmin</li>
                <li>GrovePi, Raspberry Pi with DHT11 temperature and humidity sensor</li>
            </ol>

            You must also be using a Windows computer with the following installed:<br />

            <ol>
                <li>Microsoft Access</li>
                <li>MySQL ODBC 8 ANSI driver (see <a href="../IOT20/IOT20.html" class="bg-info text-white" target="_blank"  >IOT20</a>)</li>

            </ol>






            This assignment reviews basic computer concepts that you will need in this course and throughout your career.
            <br />
            <p>
                You are expected to have a working knowledge of SBC hardware and software.<br />
                If you do not understand how to use an item, perform a Google Search, 
                refer to the <a href="https://learn.winona.edu/WSU_Technology_Knowledge_Base" class="bg-info text-white" target="_blank">WSU Technology Knowledge Base</a>,&nbsp; ask a teaching assistant, or ask the instructor.
            </p>
            <p>
                &nbsp;
            </p>
            <p>
                9/10/22-rough outline
            </p>
            <p>
                1. make sure you can collect DHT data from Raspberry Pi
            </p>
            <p>
                2. make sure you can write data to MySQL database<br />
                You may need to install the Python mysql library using the command:<br />
                <code>sudo pip3 install mariadb==1.0.11</code>
                <br />
                You may need to install dependcies for mariadb using the command:<br />
                <code>sudo apt install libmariadb3 libmariadb-dev
</code>
            </p>
            <p>
                3. make sure you can read data from mariad database-both throught CLI on RPi/MySQL and Microsoft Access via ODBC to MySQL<br />
                You may need to create the MySQL/mariadb database 'sensor' and create the 'dht' table using the 'dht.sql' file<br />
                run the following command in MySQL, once you transfer 'dht.sql' to the 'IoT_Files' folder on the Raspberry Pi:<br />
                <code>source /home/pi/Desktop/IoT_Files/dht.sql</code>

            </p>
            <p>
                &nbsp;
            </p>

            <hr />
        </div>




        <!--Exercise 1-->

        <div class="col-lg-12"><a href="#Exercise01" class="btn btn-info" data-toggle="collapse">Exercise 1-Code Review</a><a href="#Exercise01"></a></div>

        <div id="Exercise01" class="collapse in  col-lg-12">




            <p>Review the code that reads the sensor data and writes it to the MySQL/MariaDB database.</p>


            <ol>

                <li>These steps are performed on the Raspberry Pi</li>

                <li>Open Thonny and load the <code>insert.py</code> program with is located on the Desktop in the &#39;IoTFiles&#39; folder.


                                <p>
                                    <a href="images/insert.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/insert.PNG', 'popup'); return false;">
                                        <img src="images/insert.PNG" width="200" alt="code to insert sensor record" class="img-responsive img-responsive" /></a>Python Code to Insert Database Record<br />
                                </p>
                </li>

                <li>Review the code</li>

                <li>Line 22 reads the sensor data<br />
                    <code>[temp,hum] = dht(dht_sensor_port,dht_sensor_type)    # read DHT11 sensor data</code>
                </li>

                <li>Line 28 contains the SQL INSERT clause with the formatted sensor data, and adds a timestamp.<br />
                    <code>[temp,hum] = dht(dht_sensor_port,dht_sensor_type)    # ready DHT11 sensor data </code>
                </li>

                <li>Line 31 sends the sensor data to the MySQL table dht, then line 32 commits these changes.
                    <br />
                    <code>[temp,hum] = dht(dht_sensor_port,dht_sensor_type)    # ready DHT11 sensor data  </code>
                    <br />
                    <code>mydb.commit() </code>
                </li>

                <li>Reflect on the purpose of lines 34 and 35.
                    <br />
                    <code>print("Temp:  ", temperature, "Humidity: ",humidity, "Time: ",timestamp)  </code>
                    <br />
                    <code>time.sleep(60)    # pause a minute     </code>
                </li>

                <li>The Raspberry Pi appears to be running the insert.py program to send data to the  MySQL/Maria database server correctly.<br />
                    Next, check to make sure that the data is actually being inserted into the database.
                </li>


            </ol>

            <hr />

        </div>






        <!--Exercise 2-->


        <div class="col-lg-12"><a href="#Exercise02" class="btn btn-info" data-toggle="collapse">Exercise 2-Write to MySQL</a></div>

        <div id="Exercise02" class="collapse in  col-lg-12">

            <p>These steps are performed on the Raspberry Pi. </p>

            <ol>
                <li>Open a Terminal window and enter the following commands <b>to log into the MySQL instance, noting that the default password is blank</b>:<br />
                    <code>sudo mysql -u root -p -h localhost</code><br />
                    Press Enter when prompted for the password.<br />

                </li>

                <li>Type the following command in MySQL to mount the sensor database:
                    <br />
                    <code>use sensor;
                    </code> 
                    <br />
                    If database sensor does not exist use phpmyadmin to create the database using Collation = 'utf8mb4_general_ci'
                    <br />


                </li>

                <li>Type the following MySQL command to view the contents of the dht table:
                    <br />
                    <code>SELECT * from dht; </code>
                    <br />

                    <a href="images/sensorData.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/sensorData.PNG', 'popup'); return false;">
                        <img src="images/sensorData.PNG" width="300" alt="sensor data" class="img-responsive img-responsive" /></a> MySQL Sensor Data<br />
                    <br />
                    Note: if table 'dht' does not exist use place the file 'dht.sql' into the RPi /home/pi/Desktop/IoT_Files folder and run the following command in mySQL: <br />
                    <code>
                        SOURCE /home/pi/Desktop/IoT_Files/dht.sql
                    </code>
                    <br />


                </li>

                <li>Examine the output, reflecting on the importance of the recordID and timestamp fields and the data they contain.
                </li>




                <li>Consider what will happen as more records are added to the dht table.<br />
                    Can you create a SQL statement that will display the most recent record first? </li>

                <li>It appears that sensor data is being added to the database.<br />
                    Next, make sure you can share this sensor data with another computer on the network running Microsoft Access.
                </li>

            </ol>

            <hr />

        </div>






        <!--Exercise 3-->


        <div class="col-lg-12"><a href="#Exercise03" class="btn btn-info" data-toggle="collapse">Exercise 3-Connect With ODBC</a></div>

        <div id="Exercise03" class="collapse in  col-lg-12">

            <p>
                These steps are performed on your computer.
            </p>





            <p>
                In IOT20 you installed and configured the 64-bit MySQL ODBC 8 ANSI driver.<br />
                Now you will make use of ODBC to link your Windows computer to the MySQL database on the Raspberry Pi.
            </p>

            <p>This exercise demonstrates how to share data from a Raspberry Pi with other computers over a network.</p>

            <ol>

                <li>If the ODBC driver has not been installed, please go back to IOT20 and follow the instrucitons.</li>


                <li>To verify that the ODBC drive is installed, click Start, type in 'ODBC', find the 64-bit version and click to start.</li>



           


                <li>Under the User DSN tab, select the MySQL ODBC Data Source, click &#39;Configure&#39;<br />
                    Note your data source name may be different<br />
                    Enter your Raspberry Pi IP address (get it from VNC), enter the following information for user, password, database:<br />
                    Username: <code>user</code>
                    <br />
                    Password: <code>user</code>
                    <br />
                    Database: <code>sensor</code>
                    <br />
                    Press the &#39;Test&#39; button <br />

                    <p>
                        <a href="images/ODBCtest_Unicode.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/ODBCtest_Unicode.PNG', 'popup'); return false;">
                            <img src="images/ODBCtest_Unicode.PNG" width="300" alt="ODBC test" class="img-responsive img-responsive" /></a> ODBC Test<br />

                    </p>
                </li>

                <li>If your connection test is not successful troubleshoot and correct the problem.
                </li>

                <li>Open Microsoft Access and create a new blank database.   <br />

               Save the database  as &quot;sensor&quot; in your ' 
             <code><span id="Path1"></span></code>
                    ' folder.<br />
                </li>


                <li>From the Access menu choose External Data&gt;New Data Source&gt; From Other Sources&gt;ODBC Database:<br />
                    Choose the second option to 'Link to the datsource by creating a linked table'</li>

                <li> In the &#39;Select Data Source&#39; dialog box choose the tab &#39;Machine Data Source&#39; and select the connection to the sensor database.
                    <br />
                    <a href="images/dataSource.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/dataSource.PNG', 'popup'); return false;">
                        <img src="images/dataSource.PNG" width="300" alt="data source" class="img-responsive img-responsive" /></a> Select Data Source<br />

                </li>


                <li>In the &#39;Link Tables&#39; dialog box select the table dht then press OK.<br />
                    <a href="images/linkTables.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/linkTables.PNG', 'popup'); return false;">
                        <img src="images/linkTables.PNG" width="300" alt="link table dht" class="img-responsive img-responsive" /></a> Linking the dht table</li>


                <li>In the &#39;Navigation Pane&#39; double-click the table &#39;dht&#39; to open it and view the linked data.<br />
                    <a href="images/linkedData.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/linkedData.PNG', 'popup'); return false;">
                        <img src="images/linkedData.PNG" width="300" alt="linked data" class="img-responsive img-responsive" /></a> Viewing Linked dht table</li>


                <li>Use Access to display the dht table, and VNC to display the MySQL database query results from <code>SELECT * FROM dht;</code> <br />
                    
                   
                    <a href="images/dataView.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/dataView.PNG', 'popup'); return false;">
                        <img src="images/dataView.PNG" width="300" alt="viewing data" class="img-responsive img-responsive" /></a> Viewing Data Two Ways<br />

                    Take a screenshot showing both views of the data<br />

                </li>

            </ol>

            <hr />

        </div>








        <!--Exercise 4-->


        <div class="col-lg-12"><a href="#Exercise04" class="btn btn-info" data-toggle="collapse">Exercise 4-Screenshot</a></div>

        <div id="Exercise04" class="collapse in  col-lg-12">

            <p>
                These steps are done on your laptop using Microsoft Access and VNC.
            </p>

            <ol>
                <li>Save your screenshot of the Raspberry Pi MySQL sensor database displaying records from the dht table, along with the linked Access table showing the same information.<br />
                    Note: this can be done using the Snipping Tool.
                </li>

                <li>On your laptop save the screenshot  as &quot;IOT21&quot; in your ' 
             <code><span id="Path2"></span></code>
                     ' folder.<br />
                </li>
            </ol>
            <hr />
        </div>


        <div class="col-lg-12 text-danger">
            <h2>Screenshot IOT21</h2>
            <hr />
        </div>





        <div class="col-lg-12"><a href="#UploadScreenShot" class="btn btn-info" data-toggle="collapse">Upload Screenshot</a></div>

        <div id="UploadScreenShot" class="collapse in  col-lg-12">
            <p>
                Submit to the appropriate D2L Assignment folder a screenshot that documents your work.<br />
            </p>
            <br />
        </div>

        <div class="col-lg-12 text-primary">
            <p>
                (50) 1. Upload your screenshot to the &#39;IOT21&#39; D2L Assignment Folder.
            </p>
            <hr />
        </div>




        <!--Exercise 5-->

        <div class="col-lg-12"><a href="#Exercise05" class="btn btn-info" data-toggle="collapse">Exercise 5-Reflections</a></div>

        <div id="Exercise05" class="collapse in  col-lg-12">

            <p>
                Based on your experience in this exercise, consider the value of MySQL databases that can be accessed over the network, for organizations, especially those needing to collect and analyze information.<br />
                Think about what type of problems a Raspberry Pi equipped with a relational database could solve, and whether it could be cost-effective.<br />
                Businesses are deploying IoT 'solutions'-how can MySQL equipped Raspberry Pis support or automate these efforts?<br />
                How does the use of ODBC which enables viewing this data by programs such as Microsoft Access benefit an organization?
                <br />
                References:<br />
                MySQL on Pi: <a href="https://pimylifeup.com/raspberry-pi-mysql/" class="bg-info text-white" target="_blank">&nbsp;Pi MyLifeUp website</a><br />

                W3 Schools:&nbsp; <a class="bg-info text-white" href="https://www.w3schools.com/mySQl/default.asp" target="_blank">MySQL Tutorial </a>
                <br />

                GUI for MySQL:    <a href="https://www.packtpub.com/product/mastering-phpmyadmin-3-4-for-effective-mysql-management/9781849517782">Mastering phpMyAdmin 3.4 </a>
                <br />

            </p>


            <p>
                Learning phpMyAdmin: See Documentation on local install, home screen.<br />
                <a href="images/phpMyAdmin.PNG" class="img-responsive img-rounded" target="popup" onclick="window.open('images/phpMyAdmin.PNG', 'popup'); return false;">
                    <img src="images/phpMyAdmin.PNG" width="300" alt="phpMyAdmin" class="img-responsive img-responsive" /></a> phpMyAdmin, Documentation


            </p>
            <p>
                &nbsp;
            </p>
            <div class="col-lg-12 text-primary">
                (20) 2. Reflections-value<br />
                List a reason an organization would want to connect to a networked, MySQL relational database collecting data on a Raspberry Pi?<br />

                <!-- Enter your answer in the VALUE field below   GROK -->
                <input class="form-control" name="q2" type="text" id="q2" value="specific reason:" />
                <hr />
            </div>



            <div class="col-lg-12 text-primary">
                (20) 3. Reflections-content<br />
                Research the internet on the topic of relational databases and ODBC.<br />
                How could an organization&#39;s data adminstrator use MySQL databases readily accessible to workers using Microsoft Access to their organization&#39;s benefit?<br />

                <!-- Enter your answer in the VALUE field below   GROK -->
                <input class="form-control" name="q3" type="text" id="q3" value="use of MySQL and ODBC:" />
                <hr />
            </div>


        </div>








        <div class="col-lg-12"><a href="#ExerciseSubmit" class="btn btn-info" data-toggle="collapse">Submit Assignment</a></div>


        <div class="col-lg-12">
            <p>
                When all tasks are completed press the Submit button.
            </p>
            <hr />
        </div>

        <div class="col-lg-12 text-primary">
            (10) 4. Assignment submission<br />

            <!-- Enter your answer in the VALUE field below   GROK -->
            <input class="form-control" name="q4" type="text" id="q4" value="I have completed all the exercises, and uploaded my screenshot to the D2L Assignment folder IOT21." />
            <hr />
        </div>





        <div class="col-lg-12">
            <p>
                Congratulations! You have collected sensor data from a Raspberry Pi in a relational database application-MySQL/mariadB on the Raspberry Pi, and linked it to a Windows computer running Microsoft Access.                
            </p>
            <hr />
        </div>






        <div class=" col-lg-12">
            <br />
            <input class=" text-danger btn-block btn-lg" type="submit" name="Submit" value="SUBMIT -once you have completed this assignment- SUBMIT" />
            <br />
        </div>

    </form>

    <!-- PgP 5/31/2025 place js code at end to prevent race conditions -->

    <!-- Creative Commons License Info -->
    <footer>
        <div id="licenseInfo" class="col-lg-12 text-muted"></div>
        <div id="footerText" class="col-lg-12 text-muted"></div>
    </footer>

    <!-- ========== Script Includes (Order is Critical) ========== -->
    <script src="../../ReadOnly/jquery-1.js"></script>
    <script src="../../ReadOnly/bootstrap.js"></script>
    <script src="../studentConstants.js"></script>
    <script src="../../ReadOnly/courseConstants.js"></script>
    <script src="../../ReadOnly/domForms.js"></script>


</body>
</html>